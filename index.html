<!DOCTYPE html>
<html lang="ta">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Our Love тАФ 4th Anniversary ЁЯТЬ</title>
  <style>
    /* ---------------- base ---------------- */
    :root{
      --purple1:#2d0a3f;
      --purple2:#10002b;
      --accent:#c77dff;
      --btn:#9d4edd;
      --glass: rgba(157,78,221,0.18);
      --whitef: rgba(255,255,255,0.95);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Poppins,system-ui,Segoe UI,Roboto,"Noto Sans",sans-serif;background:#0d001a;color:var(--whitef);-webkit-font-smoothing:antialiased}
    .app{min-height:100vh;position:relative;overflow:hidden}

    /* ---------------- background moon + overlay ---------------- */
    .bg {
      position:fixed;inset:0;z-index:-5;
      background: url('moon.jpg') center/cover no-repeat;
      filter: saturate(.9) contrast(.95);
    }
    .overlay{position:fixed;inset:0;z-index:-4;
      background: linear-gradient(135deg, rgba(45,10,63,0.82), rgba(16,0,43,0.95));
      mix-blend-mode:normal;
    }

    /* ---------------- sections (levels) ---------------- */
    .scene {
      position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:24px;transition:opacity .9s ease,transform .9s ease;opacity:0;pointer-events:none;
    }
    .scene.active{opacity:1;pointer-events:auto}
    h1{margin:0 0 18px;font-size:2.2rem;color:var(--accent);text-shadow:0 0 12px rgba(155,0,255,.25)}
    p.lead{font-size:1.05rem;max-width:760px;line-height:1.6;margin:0 0 18px;color:rgba(255,244,255,.95)}

    /* ---------------- buttons ---------------- */
    .btn {
      background: linear-gradient(180deg,var(--btn),#c77dff);
      color:#fff;border:0;padding:12px 20px;border-radius:28px;font-size:1.03rem;margin:10px;cursor:pointer;box-shadow:0 8px 28px rgba(125,61,152,.18);
      transition:transform .25s ease,box-shadow .25s ease;
    }
    .btn:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(125,61,152,.28)}

    /* small subtle subtitle */
    .muted{color:rgba(255,255,255,.7);font-size:.95rem;margin-top:8px}

    /* ---------------- hearts + words layer (for magical scene) ---------------- */
    .magic-layer{position:absolute;inset:0;z-index:3;pointer-events:none;overflow:hidden}
    .floating-heart{
      position:absolute;font-size:20px;text-shadow:0 0 10px rgba(199,125,255,.9);
      animation:raise linear infinite;
      opacity:.95;
    }
    @keyframes raise{from{transform:translateY(120vh) scale(.6);opacity:1}to{transform:translateY(-15vh) scale(1.4);opacity:0}}
    .floating-word{
      position:absolute;font-weight:700;color:#ffd9ff;text-shadow:0 0 10px rgba(199,125,255,.9);
      font-size:20px;animation:raiseWords linear infinite;opacity:0.95;white-space:nowrap
    }
    @keyframes raiseWords{from{transform:translateY(120vh)}to{transform:translateY(-10vh)}}

    /* ---------------- mini-game (collect hearts) ---------------- */
    .game-area{width:100%;max-width:820px;height:420px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));backdrop-filter:blur(4px);display:grid;place-items:center;position:relative;overflow:hidden;padding:12px;border:1px solid rgba(199,125,255,0.08)}
    .collect-heart{position:absolute;font-size:28px;cursor:pointer;text-shadow:0 0 10px rgba(199,125,255,.9)}
    .progress{width:280px;height:14px;background:rgba(255,255,255,.08);border-radius:8px;margin-top:14px;overflow:hidden}
    .progress > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#ffd0ff,#c77dff);border-radius:8px;transition:width .4s ease}

    /* ---------------- final fireworks canvas + photo ---------------- */
    .final-photo{width:300px;height:300px;border-radius:50%;object-fit:cover;border:6px solid rgba(199,125,255,.7);box-shadow:0 0 40px rgba(199,125,255,.6)}
    .final-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:20px;border-radius:14px;border:1px solid rgba(199,125,255,.07)}

    /* small helper */
    .row{display:flex;gap:12px;align-items:center;justify-content:center;flex-wrap:wrap}
    footer{position:fixed;left:12px;bottom:12px;color:rgba(255,255,255,.5);font-size:.86rem}
    @media (max-width:520px){
      h1{font-size:1.6rem}
      .game-area{height:320px}
      .final-photo{width:230px;height:230px}
    }
  </style>
</head>
<body>
  <div class="app">

    <!-- background layers -->
    <div class="bg" aria-hidden="true"></div>
    <div class="overlay" aria-hidden="true"></div>

    <!-- magic floating layer -->
    <div class="magic-layer" id="magicLayer" aria-hidden="true"></div>

    <!-- ------------- SCENE 0 : START (title + start game) ------------- -->
    <div id="sceneStart" class="scene active" style="z-index:2">
      <h1>Happy 4th Anniversary тАФ Tiny Love ЁЯТЬ</h1>
      <p class="lead">роЗро╡рпИ роОро▓рпНро▓ро╛роорпН роЪро┐ро▒ро┐родрпБ роОройрпНро▒рпБ роорпБроЯро┐родрпНродрпБ ро╡ро┐роЯро▓ро╛роорпН! роПройрпЛ рокро┐ройрпН роЗро░рпБроХрпНроХрпБроорпН роХро╛родро▓рпИ роЕро▒ро┐ро╡ро╛ропрпЛ? ЁЯМЩ</p>
      <div class="row">
        <button class="btn" id="btnStart">Click to view the SurpriseтЬи</button>
      </div>
      <p class="muted">Tap anywhere if music doesn't auto-play (mobile browsers sometimes need a gesture).</p>
    </div>

    <!-- ------------- SCENE 1 : CHOICE (pichupuduven...) ------------- -->
    <div id="sceneChoice" class="scene" style="z-index:3">
      <h1>Do you want me to wish firstЁЯлг pichupuduven vanthu enaku first ne pannu! ЁЯШдЁЯТЬ</h1>
      <p class="lead">роЗрокрпНрокрпЛ роирпА роЪрпКро▓рпНро▓ро▒ро┐ропро╛? роЪрпКро▓рпНро▓ро┐ро░рпБрокрпНрок.. choose one and let's see the mid final surprise тЬи</p>
      <div class="row">
        <button class="btn choiceBtn" data-to="sceneMagic">Surprise ah pakkanum ЁЯСАЁЯжЛ</button>
        <button class="btn choiceBtn" data-to="sceneMagic">Pakkanum Surprise ah ЁЯШЙ</button>
      </div>
    </div>

    <!-- ------------- SCENE 2 : MAGIC (first redirection with floating words + music1 + hearts) ------------- -->
    <div id="sceneMagic" class="scene" style="z-index:4">
      <h1>ЁЯТЬ Happy 4th Anniversary My Love ЁЯТЬ</h1>
      <p class="lead">Floating loves & hearts just for you...ЁЯТХ </p>

      <!-- magic mini area with instruction -->
      <div class="game-area" id="magicGame">
        <div style="text-align:center;color:#ffdfff">
          <strong>Collect 6 little hearts to unlock the next surprise ЁЯТХ</strong>
          <p style="margin:6px 0 12px;color:rgba(255,244,255,.9)">Hey enna pakkura ЁЯСА, unnala hearts ah thoda mudiyalana ne enna pannalum mudiyathu enah antha hearts kulla tha ne iruka ЁЯЩИЁЯШШтЬи</p>
        </div>
        <div style="position:absolute;inset:0"></div>

        <div style="position:absolute;bottom:10px;left:50%;transform:translateX(-50%);">
          <div class="progress"><i id="progressBar" style="width:0%"></i></div>
        </div>
      </div>

      <div class="row" style="margin-top:18px">
        <button class="btn" id="skipMagic">Skip the hearts - And continue to See the love тЭдя╕П</button>
      </div>
    </div>

    <!-- ------------- SCENE 3 : YOUR TURN (short question) ------------- -->
    <div id="sceneTurn" class="scene" style="z-index:5">
      <h1>Eppo enoda anu gunda pakka ready ah ne ЁЯлгЁЯШН (ennala mudinja chinna surprise tha mokkaiya tha irukum mannichukkaЁЯе▓ЁЯй╖)</h1>
      <p class="lead">Once you choose, the final surprise will revealЁЯЩИ</p>
      <div class="row">
        <button class="btn" data-to="sceneFinal">Kandipa ЁЯТХ</button>
        <button class="btn" data-to="sceneFinal">Absolutely ЁЯТЬ</button>
      </div>
    </div>

    <!-- ------------- SCENE 4 : FINAL SURPRISE ------------- -->
    <div id="sceneFinal" class="scene" style="z-index:6">
      <h1>ЁЯТЬ Forever Us ЁЯТЬ</h1>

      <div class="final-card" style="display:flex;flex-direction:column;align-items:center;gap:16px">
        <img src="moon.jpg" alt="Our Photo" class="final-photo" />

        <div style="max-width:700px;text-align:center">
          <p class="lead" style="margin-bottom:8px">
            роиро╛ройрпНроХро┐ро▓рпН роПродрпЛ роТро░рпН  ро╡ро┐род роИро░рпНрокрпНрокрпБродрпНродро╛ройрпН,<br>
            роиро╛ройрпНроХро┐ро▓рпН роПродрпЛ роТро░рпН  ро╡ро┐род роИро░рпНрокрпНрокрпБродрпНродро╛ройрпН,роорпБродро▓рпН роорпБродро▓ро╛роХ роиро╛ройрпНроХрпБ роиро╛ро│рпН роЙройрпНройрпИ роХро╛рогро╛рооро▓рпН родрпЗроЯро┐роп родрпЗроЯро▓рпЛ роОройрпНро▒рпБ ро╡ро░рпИ рооро▒роХрпНроХро╡рпБроорпН роЗро▓рпНро▓рпИ рооро╛ропроорпН рооройроорпН ро╡ро┐роЯрпНроЯрпБ рокрпЛроХро╡рпЛ роЗро▓рпНро▓рпИ! роЖройро╛ро▓рпН
роЕроирпНроиро╛ро│рпН роирпА родрпЗроЯро┐роп роЬройрпНройро▓ро┐ро▓рпН роЗройрпНро▒рпБ роиро╛ройрпБроорпН роЗро▓рпНро▓рпИ.. роЗро░рпБрокрпНрокро┐ройрпБроорпН роЙройрпН родро┐ро▒роХрпНроХ рокроЯро╛род роХродро╡ро┐ро▓рпН роОройрпНро▒рпБроорпН роиро╛ройрпНродро╛ройрпЛ? тЭдя╕П
          </p>
          <div class="row">
            <button class="btn" id="replay">Play Again</button>
            <button class="btn" id="downloadPhoto">Download Photo</button>
          </div>
        </div>
      </div>

      <canvas id="fireworks" style="position:fixed;inset:0;z-index:7;pointer-events:none"></canvas>
    </div>

    <footer>With full of ЁЯТЬ тАФ 4th Anniversary</footer>
  </div>

  <audio id="bgMusic" src="music1.mp3" loop></audio>
  <audio id="finalMusic" src="music2.mp3" loop></audio>

  <script>
    const scenes = ['sceneStart','sceneChoice','sceneMagic','sceneTurn','sceneFinal'];
    function showScene(id){
      scenes.forEach(s=>{
        const el=document.getElementById(s);
        if(!el) return;
        if(s===id) el.classList.add('active'); else el.classList.remove('active');
      });
    }

    document.getElementById('btnStart').addEventListener('click',()=>{
      showScene('sceneChoice');
      tryPlayAll();
    });

    document.querySelectorAll('.choiceBtn').forEach(b=>{
      b.addEventListener('click',()=>{
        showScene('sceneMagic');
        startMagicScene();
      });
    });

    document.getElementById('skipMagic').addEventListener('click',()=>{
      stopMagicScene();
      showScene('sceneTurn');
      showLoveScore();
    });

    document.querySelectorAll('#sceneTurn .btn').forEach(b=>{
      b.addEventListener('click',()=>{
        showScene('sceneFinal');
        stopMagicScene();
        startFinal();
      });
    });

    document.getElementById('replay').addEventListener('click',()=>{
      resetMagic();
      showScene('sceneStart');
      stopFinal();
    });

    document.getElementById('downloadPhoto').addEventListener('click',()=>{
      const a=document.createElement('a');
      a.href='partner.jpg'; a.download='our-photo.jpg';
      document.body.appendChild(a); a.click(); a.remove();
    });

    const bgMusic=document.getElementById('bgMusic');
    const finalMusic=document.getElementById('finalMusic');
    function tryPlayAll(){
      bgMusic.play().catch(()=>{});
      finalMusic.play().catch(()=>{});
      finalMusic.pause();
      bgMusic.pause();
    }

    const magicLayer=document.getElementById('magicLayer');
    let magicInterval1=null,magicInterval2=null;
    let collectCount=0;
    const targetCollect=6;
    const progressBar=document.getElementById('progressBar');
    const cuteWords=["My Love","My Happiness","My Everything","Minminie","Alagu","Pumpkin","Cutiepie","Soulmate","Sweetheart","Ammu","Dearest"];

    function startMagicScene(){
      try{ finalMusic.pause(); bgMusic.currentTime=0; bgMusic.play(); }catch(e){}
      magicInterval1=setInterval(spawnHeart,1200);
      magicInterval2=setInterval(spawnWord,2000);
      document.body.animate([{filter:'brightness(1)'},{filter:'brightness(1.06)'},{filter:'brightness(1)'}],{duration:6000,iterations:Infinity});
    }

    function stopMagicScene(){
      clearInterval(magicInterval1); clearInterval(magicInterval2);
      Array.from(magicLayer.children).forEach(c=> {c.style.transition='opacity .8s linear'; c.style.opacity='0'; setTimeout(()=>c.remove(),900)});
      try{ bgMusic.pause(); bgMusic.currentTime=0; }catch(e){}
    }

    function resetMagic(){
      stopMagicScene();
      collectCount=0;
      progressBar.style.width='0%';
    }

    function spawnHeart(){
      const h=document.createElement('div');
      h.className='floating-heart';
      h.innerHTML='ЁЯТЬ';
      const left=Math.random()*80;
      const size=20 + Math.random()*20;
      const dur=6000 + Math.random()*4000;
      h.style.left=left+'vw';
      h.style.fontSize=size+'px';
      h.style.animationDuration=dur+'ms';
      h.style.opacity=0.95;
      h.style.cursor='pointer';
      h.addEventListener('click',()=>{
        collectCount++;
        const perc=Math.min(100,Math.round((collectCount/targetCollect)*100));
        progressBar.style.width=perc+'%';
        h.style.transform='scale(1.4)';
        h.style.transition='transform .26s ease, opacity .5s ease';
        h.style.opacity=0;
        setTimeout(()=>h.remove(),260);
        if(collectCount>=targetCollect){
          setTimeout(()=>{
            confettiBurst();
            stopMagicScene();
            showScene('sceneTurn');
            showLoveScore();
          },700);
        }
      });
      magicLayer.appendChild(h);
      setTimeout(()=>{if(h.parentNode) h.remove();}, dur+1200);
    }

    function spawnWord(){
      const w=document.createElement('div');
      w.className='floating-word';
      w.textContent=cuteWords[Math.floor(Math.random()*cuteWords.length)];
      w.style.left=(5+Math.random()*80)+'vw';
      w.style.fontSize=(16+Math.random()*14)+'px';
      const dur=5000+Math.random()*7000;
      w.style.animationDuration=dur+'ms';
      magicLayer.appendChild(w);
      setTimeout(()=>{if(w.parentNode) w.remove();}, dur+600);
    }

    function confettiBurst(){
      const centerX=window.innerWidth/2;
      const centerY=window.innerHeight/2;
      for(let i=0;i<36;i++){
        const e=document.createElement('div');
        e.style.position='fixed';
        e.style.left=centerX+'px';
        e.style.top=centerY+'px';
        e.style.zIndex=9999;
        e.style.pointerEvents='none';
        e.textContent='ЁЯТЦ';
        e.style.fontSize=(12+Math.random()*22)+'px';
        const angle=Math.random()*Math.PI*2;
        const dist=160+Math.random()*180;
        e.style.transition='transform .9s cubic-bezier(.15,.7,.2,1), opacity 1s';
        document.body.appendChild(e);
        requestAnimationFrame(()=>{e.style.transform=`translate(${Math.cos(angle)*dist}px,${Math.sin(angle)*dist}px) rotate(${Math.random()*360}deg)`; e.style.opacity='0';});
        setTimeout(()=>e.remove(),1200);
      }
    }

    const fireworksCanvas=document.getElementById('fireworks');
    const fwCtx=fireworksCanvas.getContext && fireworksCanvas.getContext('2d');
    let fwRunning=false,fwRAF,fwInterval;
    const particles=[];

    function startFinal(){
      try{ bgMusic.pause(); finalMusic.currentTime=0; finalMusic.play(); }catch(e){}
      if(!fwCtx) return;
      fireworksCanvas.width=innerWidth;
      fireworksCanvas.height=innerHeight;
      fwRunning=true;
      fireworksLoop();
      fwInterval=setInterval(()=>createFireworkBurst(Math.random()*innerWidth*0.9+innerWidth*0.05,Math.random()*innerHeight*0.6+innerHeight*0.1),900);
      magicInterval1=setInterval(spawnHeart,800);
    }

    function stopFinal(){
      try{ finalMusic.pause(); finalMusic.currentTime=0; }catch(e){}
      fwRunning=false; clearInterval(fwInterval);
    }

    function fireworksLoop(){
      if(!fwRunning) return;
      fwCtx.clearRect(0,0,fireworksCanvas.width,fireworksCanvas.height);
      requestAnimationFrame(fireworksLoop);
    }

    function createFireworkBurst(x,y,size=12,count=18){
      for(let i=0;i<count;i++){
        const particle=document.createElement('div');
        particle.style.position='fixed';
        particle.style.left=x+'px';
        particle.style.top=y+'px';
        particle.textContent='тЬи';
        particle.style.fontSize=size+'px';
        particle.style.zIndex=9999;
        particle.style.pointerEvents='none';
        document.body.appendChild(particle);
        setTimeout(()=>particle.remove(),900);
      }
    }

    function showLoveScore(){
      setTimeout(()=>alert("You're love always above the sky, moon and across the whole universe! ЁЯТЬ"),300);
    }
  </script>
</body>
</html>
